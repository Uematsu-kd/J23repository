<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <title>役パズル</title>
</head>
<h1>役パズル</h1>

<body>
    <!--牌のボタン-->
    <!--ここからマンズ-->
    <button id="imageButton1">
        <img src="images/pai-images/man1.png">
    </button>

    <button id="imageButton2">
        <img src="images/pai-images/man2.png">
    </button>

    <button id="imageButton3">
        <img src="images/pai-images/man3.png">
    </button>

    <button id="imageButton4">
        <img src="images/pai-images/man4.png">
    </button>

    <button id="imageButton5">
        <img src="images/pai-images/man5.png">
    </button>

    <button id="imageButton6">
        <img src="images/pai-images/man6.png">
    </button>

    <button id="imageButton7">
        <img src="images/pai-images/man7.png">
    </button>

    <button id="imageButton8">
        <img src="images/pai-images/man8.png">
    </button>

    <button id="imageButton9">
        <img src="images/pai-images/man9.png">
    </button>

    <br>

    <!--ここからピンズ-->
    <button id="imageButton10">
        <img src="images/pai-images/pin1.png">
    </button>

    <button id="imageButton11">
        <img src="images/pai-images/pin2.png">
    </button>

    <button id="imageButton12">
        <img src="images/pai-images/pin3.png">
    </button>

    <button id="imageButton13">
        <img src="images/pai-images/pin4.png">
    </button>

    <button id="imageButton15">
        <img src="images/pai-images/pin5.png">
    </button>

    <button id="imageButton16">
        <img src="images/pai-images/pin6.png">
    </button>

    <button id="imageButton17">
        <img src="images/pai-images/pin7.png">
    </button>

    <button id="imageButton18">
        <img src="images/pai-images/pin8.png">
    </button>

    <button id="imageButton19">
        <img src="images/pai-images/pin9.png">
    </button>

    <br>

    <!--ここからソーズ-->
    <button id="imageButton20">
        <img src="images/pai-images/sou1.png">
    </button>

    <button id="imageButton21">
        <img src="images/pai-images/sou2.png">
    </button>

    <button id="imageButton22">
        <img src="images/pai-images/sou3.png">
    </button>

    <button id="imageButton23">
        <img src="images/pai-images/sou4.png">
    </button>

    <button id="imageButton24">
        <img src="images/pai-images/sou5.png">
    </button>

    <button id="imageButton25">
        <img src="images/pai-images/sou6.png">
    </button>

    <button id="imageButton26">
        <img src="images/pai-images/sou7.png">
    </button>

    <button id="imageButton27">
        <img src="images/pai-images/sou8.png">
    </button>

    <button id="imageButton28">
        <img src="images/pai-images/sou9.png">
    </button>

    <br>

    <!--ここから字牌-->
    <button id="imageButton29">
        <img src="images/pai-images/ji1.png">
    </button>

    <button id="imageButton30">
        <img src="images/pai-images/ji2.png">
    </button>

    <button id="imageButton31">
        <img src="images/pai-images/ji3.png">
    </button>

    <button id="imageButton32">
        <img src="images/pai-images/ji4.png">
    </button>

    <button id="imageButton33">
        <img src="images/pai-images/sangen1.png">
    </button>

    <button id="imageButton34">
        <img src="images/pai-images/sangen2.png">
    </button>

    <button id="imageButton35">
        <img src="images/pai-images/sangen3.png">
    </button>

    <br>
    <h2>手牌</h2>
    <div id="imageContainer"></div>

    <!-- 手牌をリセットするボタンを追加 -->
    <button id="resetButton">リセット</button>


    <script type="text/javascript">
        // 選択された牌の配列
        let selectedTiles = [];

        // 牌の数をチェックする関数
        function checkTileCount(imageSrc) {
            return selectedTiles.filter(src => src === imageSrc).length;
        }

        // 手牌エリアに牌を追加する関数
        function addTileToHand(imageSrc) {
            if (selectedTiles.length < 14 && checkTileCount(imageSrc) < 4) {
                selectedTiles.push(imageSrc);
                renderHand();
            }
        }

        // 手牌エリアを描画する関数
        function renderHand() {
            const handContainer = document.getElementById('imageContainer');
            handContainer.innerHTML = ''; // 手牌エリアをクリア
            selectedTiles.forEach((src, index) => {
                const img = document.createElement('img');
                img.src = src;
                img.addEventListener('click', () => removeTileFromHand(index));
                handContainer.appendChild(img);
            });
        }
        // 手牌から牌を削除する関数
        function removeTileFromHand(index) {
            selectedTiles.splice(index, 1);
            renderHand();
        }

        // 各牌ボタンにイベントリスナーを追加
        document.querySelectorAll('button[id^="imageButton"]').forEach(button => {
            button.addEventListener('click', () => {
                const imageSrc = button.querySelector('img').src;
                addTileToHand(imageSrc);
            });
        });
        // 手牌をリセットする関数
        document.getElementById('resetButton').addEventListener('click', () => {
            selectedTiles = []; // 選択された牌の配列をクリア
            renderHand(); // 手牌エリアを再描画
        });

        //手牌をソートする昇順に
        const hands = hand.sort((a, b) => a - b);

        //-----------------国士無双を判定する関数-----------------------
        function isKokusi(hands) {
            // 国士無双の13種の牌
            const kokushiTiles = [1, 9, 11, 19, 21, 29, 31, 32, 33, 34, 35, 36, 37];

            // 手牌を数えるためのオブジェクト
            const tileCount = {};

            // 手牌を数える
            hand.forEach(tile => {
                tileCount[tile] = (tileCount[tile] || 0) + 1;
            });

            // 国士無双の条件を満たすかどうかを判定
            let Kokushi = true;
            kokushiTiles.forEach(tile => {
                if (!tileCount[tile]) {
                    Kokushi = false;
                }
            });

            return Kokushi;
        }

        //------------------大三元を判定する関数--------------------------
        function isDaisharin(hands) {
            // 大三元を構成する牌の種類
            const daisharinTiles = [35, 36, 37];

            // 手牌に大三元の牌が3枚以上含まれているか判定
            for (const tile of daisharinTiles) {
                const count = hands.filter(t => t === tile).length;
                if (count < 3) {
                    return false;
                }
            }

            // 大三元が揃っている場合はtrueを返す
            return true;
        }






        //------------------一盃口を判定する関数--------------------------
        function isIipeikou(hands) {
            // 手牌を文字列に変換
            const handString = hands.join('');

            // 正規表現を使用して一盃口を検索
            const iipeikouRegex = /(11|22|33|44|55|66|77|88|99)([^0]|$)/;
            return iipeikouRegex.test(handString);
        }

    </script>
</body>

</html>